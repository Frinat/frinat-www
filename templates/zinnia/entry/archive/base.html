{% extends "zinnia/base.html" %}

{% load zinnia_tags tagging_tags i18n %}

{% block link %}
	{{ block.super }}
	{% if category %}
	<link rel="alternate" type="application/rss+xml" title="{% trans "RSS Feed" %} {{ category.title }}" href="{% url zinnia_category_feed category.tree_path %}" />
	{% endif %}
	{% if tag %}
	<link rel="alternate" type="application/rss+xml" title="{% trans "RSS Feed" %} {{ tag.name }}" href="{% url zinnia_tag_feed tag.name %}" />
	{% endif %}
	{% if author %}
	<link rel="alternate" type="application/rss+xml" title="{% trans "RSS Feed" %} {{ author.username }}" href="{% url zinnia_author_feed author.username %}" />
	{% endif %}
{% endblock %}

{% block main %}
<section>
	{% if category %}
	<h1>{{ category.title }}</h1>
	{% if category.description %}
	<p>{{ category.description|striptags|safe }}</p>
	{% endif %}
	{% endif %}
	
	{% if tag %}
	<h1>{% trans "Tag" %}: {{ tag }}</h1>
	{% endif %}
	
	{% if author %}
	<h1>{% blocktrans with author.username as author %}Entries by {{ author }}{% endblocktrans %}</h1>
	{% endif %}
	
	{% for object in object_list %}
	<div id="entry-{{ object.pk }}" class="hentry">
		{% with object.html_content|truncatewords_html:100|safe as object_content %}
			{% include "zinnia/entry/_detail.html" %}
		{% endwith %}
	</div>
	
	<hr />
	{% empty %}
		{% trans "No entries yet." %}
	{% endfor %}
	
	{% if is_paginated %}
		<nav class="paginator">
			<span class="index">
				{% blocktrans with page_obj.number as current_page and paginator.num_pages as total_page %}Page {{ current_page }} of {{ total_page }}{% endblocktrans %}
			</span>
			
			{% if page_obj.has_previous %}
			<span class="previous">
				<a href="?page={{ page_obj.previous_page_number }}" title="{% trans "More recent entries" %}">&laquo;</a>
			</span>
			{% endif %}
			
			{% for page in page_range %}
			<li class="page {% ifequal page_obj.number page %}current{% endifequal %}">
			{% ifequal page_obj.number page %}
				<strong>{{ page }}</strong>
			{% else %}
				<a href="?page={{ page }}" title="{% trans "Entries page" %} {{ page }}">{{ page }}</a>
			{% endifequal%}
			</li>
			{% endfor %}
		
			{% if page_obj.has_next %}
			<span class="next">
				<a href="?page={{ page_obj.next_page_number }}" title="{% trans "More old entries" %}">&raquo;</a>
			</span>
			{% endif %}
		</nav>
	{% endif %}
</section>
{% endblock %}
